<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中学レベル 必須単語とフレーズ一覧</title>
    <!-- Bootstrap 5.3.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; text-align: center; }
        h1 { font-size: 24px; }
        p { font-size: 16px; }
        .search-container { margin: 20px 0; }
        .search-container input { padding: 8px; width: 300px; font-size: 16px; }
        .nav-tabs { justify-content: center; margin: 20px 0; }
        .nav-link { font-size: 18px; }
        table { width: 80%; margin: 10px auto; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        td:hover { background-color: #f9f9f9; cursor: pointer; }
        .quiz-container { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border: 1px solid #ccc; box-shadow: 0 0 10px rgba(0,0,0,0.1); z-index: 1000; }
        .quiz-container.active { display: block; }
        .quiz-container input { padding: 8px; margin: 10px 0; width: 200px; }
        .quiz-container p { font-size: 18px; }
        footer { margin-top: 20px; font-size: 14px; }
        .tab-pane { max-height: 600px; overflow-y: auto; }
    </style>
</head>
<body>
    <h1>中学レベル 必須単語とフレーズ一覧</h1>
    <p>中学レベルに特化した960～1280語と頻出フレーズ（単語をクリックで発音再生、検索・クイズ機能付き）</p>

    <div class="search-container">
        <input type="text" id="search" class="form-control mx-auto" placeholder="単語やフレーズを検索..." oninput="searchWords()">
    </div>

    <button class="btn btn-primary" onclick="startQuiz()">クイズを開始</button>

    <!-- Bootstrap Tabs -->
    <ul class="nav nav-tabs" id="wordTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="nouns-tab" data-bs-toggle="tab" data-bs-target="#nouns" type="button" role="tab" aria-controls="nouns" aria-selected="true">名詞</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="verbs-tab" data-bs-toggle="tab" data-bs-target="#verbs" type="button" role="tab" aria-controls="verbs" aria-selected="false">動詞</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="adjectives-tab" data-bs-toggle="tab" data-bs-target="#adjectives" type="button" role="tab" aria-controls="adjectives" aria-selected="false">形容詞</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="adverbs-tab" data-bs-toggle="tab" data-bs-target="#adverbs" type="button" role="tab" aria-controls="adverbs" aria-selected="false">副詞</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="prepositions-tab" data-bs-toggle="tab" data-bs-target="#prepositions" type="button" role="tab" aria-controls="prepositions" aria-selected="false">前置詞</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="phrases-tab" data-bs-toggle="tab" data-bs-target="#phrases" type="button" role="tab" aria-controls="phrases" aria-selected="false">熟語・フレーズ</button>
        </li>
    </ul>

    <div class="tab-content" id="wordTabsContent">
        <div class="tab-pane fade show active" id="nouns" role="tabpanel" aria-labelledby="nouns-tab">
            <h2>名詞（732語）</h2>
            <table id="nouns-table">
                <tr><th>英単語</th><th>意味</th></tr>
            </table>
            <p>注：全732語（指導要領488語＋自然・野菜関連244語）。出典：文部科学省、英単語検定。</p>
        </div>
        <div class="tab-pane fade" id="verbs" role="tabpanel" aria-labelledby="verbs-tab">
            <h2>動詞（62語）</h2>
            <table id="verbs-table">
                <tr><th>英単語</th><th>意味</th></tr>
            </table>
            <p>注：全62語（指導要領41語＋追加21語）。</p>
        </div>
        <div class="tab-pane fade" id="adjectives" role="tabpanel" aria-labelledby="adjectives-tab">
            <h2>形容詞（90語）</h2>
            <table id="adjectives-table">
                <tr><th>英単語</th><th>意味</th></tr>
            </table>
            <p>注：全90語（指導要領60語＋追加30語）。</p>
        </div>
        <div class="tab-pane fade" id="adverbs" role="tabpanel" aria-labelledby="adverbs-tab">
            <h2>副詞（30語）</h2>
            <table id="adverbs-table">
                <tr><th>英単語</th><th>意味</th></tr>
            </table>
            <p>注：全30語（指導要領20語＋追加10語）。</p>
        </div>
        <div class="tab-pane fade" id="prepositions" role="tabpanel" aria-labelledby="prepositions-tab">
            <h2>前置詞（30語）</h2>
            <table id="prepositions-table">
                <tr><th>英単語</th><th>意味</th></tr>
            </table>
            <p>注：全30語（指導要領20語＋追加10語）。</p>
        </div>
        <div class="tab-pane fade" id="phrases" role="tabpanel" aria-labelledby="phrases-tab">
            <h2>熟語・フレーズ（175個）</h2>
            <table id="phrases-table">
                <tr><th>フレーズ</th><th>意味</th></tr>
            </table>
            <p>注：全175フレーズ（指導要領50＋追加125）。イギリス英語の挨拶や自然関連フレーズを追加。</p>
        </div>
    </div>

    <div id="quiz" class="quiz-container">
        <h2>英単語クイズ</h2>
        <p id="quiz-question"></p>
        <input type="text" id="quiz-answer" class="form-control" placeholder="回答を入力">
        <p id="quiz-score">スコア: 0/10</p>
        <button class="btn btn-secondary" onclick="closeQuiz()">閉じる</button>
        <button class="btn btn-primary" onclick="nextQuestion()">次の問題</button>
    </div>

    <footer>
        <p>© 2025 中学英語 単語・フレーズ一覧</p>
    </footer>

    <!-- Bootstrap 5.3.3 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        let wordData = {};
        let quizState = { score: 0, total: 10, current: null };

        // Load words from words.json
        fetch('words.json')
            .then(response => response.json())
            .then(data => {
                wordData = data;
                populateTables();
            })
            .catch(error => console.error('Error loading words:', error));

        // Populate tables with word data
        function populateTables(filter = '') {
            const categories = [
                { id: 'nouns-table', data: wordData.nouns, key: 'word' },
                { id: 'verbs-table', data: wordData.verbs, key: 'word' },
                { id: 'adjectives-table', data: wordData.adjectives, key: 'word' },
                { id: 'adverbs-table', data: wordData.adverbs, key: 'word' },
                { id: 'prepositions-table', data: wordData.prepositions, key: 'word' },
                { id: 'phrases-table', data: wordData.phrases, key: 'phrase' }
            ];

            categories.forEach(category => {
                const table = document.getElementById(category.id);
                // Clear table except header
                while (table.rows.length > 1) table.deleteRow(1);
                const filteredData = category.data.filter(item =>
                    item[category.key].toLowerCase().includes(filter.toLowerCase()) ||
                    item.meaning.toLowerCase().includes(filter.toLowerCase())
                );
                filteredData.forEach(item => {
                    const row = table.insertRow();
                    const cell1 = row.insertCell(0);
                    const cell2 = row.insertCell(1);
                    cell1.textContent = item[category.key];
                    cell2.textContent = item.meaning;
                    cell1.onclick = () => speak(item[category.key]);
                });
            });
        }

        // Text-to-speech
        function speak(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-GB';
            speechSynthesis.speak(utterance);
        }

        // Search functionality
        function searchWords() {
            const query = document.getElementById('search').value;
            populateTables(query);
        }

        // Quiz functionality
        function startQuiz() {
            quizState = { score: 0, total: 10, current: null };
            document.getElementById('quiz-score').textContent = `スコア: ${quizState.score}/${quizState.total}`;
            document.getElementById('quiz').classList.add('active');
            nextQuestion();
        }

        function nextQuestion() {
            if (quizState.current) {
                const answer = document.getElementById('quiz-answer').value.trim().toLowerCase();
                const correctAnswer = quizState.current.item[quizState.current.key].toLowerCase();
                if (answer === correctAnswer) {
                    quizState.score++;
                    document.getElementById('quiz-score').textContent = `スコア: ${quizState.score}/${quizState.total}`;
                }
            }

            if (quizState.currentIndex >= quizState.total) {
                closeQuiz();
                alert(`クイズ終了！スコア: ${quizState.score}/${quizState.total}`);
                return;
            }

            const categories = ['nouns', 'verbs', 'adjectives', 'adverbs', 'prepositions', 'phrases'];
            const category = categories[Math.floor(Math.random() * categories.length)];
            const key = category === 'phrases' ? 'phrase' : 'word';
            const items = wordData[category];
            const item = items[Math.floor(Math.random() * items.length)];
            quizState.current = { category, item, key, index: (quizState.currentIndex || 0) + 1 };
            quizState.currentIndex = quizState.current.index;

            document.getElementById('quiz-question').textContent = `${item.meaning} の英語は？`;
            document.getElementById('quiz-answer').value = '';
        }

        function closeQuiz() {
            document.getElementById('quiz').classList.remove('active');
        }
    </script>
</body>
</html>